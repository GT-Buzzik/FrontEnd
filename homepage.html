<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        #flot-placeholder{width:750px;height:300px;}
    </style>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="jquery.flot.js"></script>
    <script type="text/javascript" src="jquery.flot.time.js"></script>
    <script type="text/javascript">

        const Url = 'https://buzzik-cooperpellaton.c9users.io:8080/fetch_listening_history?id=spotify:user:cooperpellaton';
        $.ajax({
            url:Url,
            type:"GET",
            success: function(result) {
                console.log(result)
            },
            error:function(error){
                console.log('Error ${error}')
            }
        });

        var spotifyPull = [
    {
        "listening_date": 1481661737016,
        "track": {
            "artists": [
                {
                "external_urls": {
                    "spotify": "https://open.spotify.com/artist/5INjqkS1o8h1imAzPqGZBb"
                },
                "href": "https://api.spotify.com/v1/artists/5INjqkS1o8h1imAzPqGZBb",
                "id": "5INjqkS1o8h1imAzPqGZBb",
                "name": "Tame Impala",
                "type": "artist",
                "uri": "spotify:artist:5INjqkS1o8h1imAzPqGZBb"
                }
            ],
            "available_markets": [
                "CA",
                "MX",
                "US"
            ],
            "disc_number": 1,
            "duration_ms": 108546,
            "explicit": false,
            "external_urls": {
                "spotify": "https://open.spotify.com/track/2gNfxysfBRfl9Lvi9T3v6R"
            },
            "href": "https://api.spotify.com/v1/tracks/2gNfxysfBRfl9Lvi9T3v6R",
            "id": "2gNfxysfBRfl9Lvi9T3v6R",
            "name": "Disciples",
            "preview_url": "https://p.scdn.co/mp3-preview/6023e5aac2123d098ce490488966b28838b14fa2",
            "track_number": 9,
            "type": "track",
            "uri": "spotify:track:2gNfxysfBRfl9Lvi9T3v6R"
        }
    },
    {
        "listening_date": 1481661844589,
        "track": {
            "artists": [{
                "external_urls": {
                    "spotify": "https://open.spotify.com/artist/5INjqkS1o8h1imAzPqGZBb"
                },
                "href": "https://api.spotify.com/v1/artists/5INjqkS1o8h1imAzPqGZBb",
                "id": "5INjqkS1o8h1imAzPqGZBb",
                "name": "Tame Impala",
                "type": "artist",
                "uri": "spotify:artist:5INjqkS1o8h1imAzPqGZBb"
            }],
            "available_markets": [
                "CA",
                "MX",
                "US"
            ],
            "disc_number": 1,
            "duration_ms": 108546,
            "explicit": false,
            "external_urls": {
                "spotify": "https://open.spotify.com/track/2gNfxysfBRfl9Lvi9T3v6R"
            },
            "href": "https://api.spotify.com/v1/tracks/2gNfxysfBRfl9Lvi9T3v6R",
            "id": "2gNfxysfBRfl9Lvi9T3v6R",
            "name": "Disciples",
            "preview_url": "https://p.scdn.co/mp3-preview/6023e5aac2123d098ce490488966b28838b14fa2",
            "track_number": 9,
            "type": "track",
            "uri": "spotify:track:2gNfxysfBRfl9Lvi9T3v6R"
        }
    },
    {
        "listening_date": 1481661844589,
        "track": {
            "artists": [{
                "external_urls": {
                    "spotify": "https://open.spotify.com/artist/5INjqkS1o8h1imAzPqGZBb"
                },
                "href": "https://api.spotify.com/v1/artists/5INjqkS1o8h1imAzPqGZBb",
                "id": "5INjqkS1o8h1imAzPqGZBb",
                "name": "Tame Impala",
                "type": "artist",
                "uri": "spotify:artist:5INjqkS1o8h1imAzPqGZBb"
            }],
            "available_markets": [
                "CA",
                "MX",
                "US"
            ],
            "disc_number": 1,
            "duration_ms": 108546,
            "explicit": false,
            "external_urls": {
                "spotify": "https://open.spotify.com/track/2gNfxysfBRfl9Lvi9T3v6R"
            },
            "href": "https://api.spotify.com/v1/tracks/2gNfxysfBRfl9Lvi9T3v6R",
            "id": "2gNfxysfBRfl9Lvi9T3v6R",
            "name": "Disciples",
            "preview_url": "https://p.scdn.co/mp3-preview/6023e5aac2123d098ce490488966b28838b14fa2",
            "track_number": 9,
            "type": "track",
            "uri": "spotify:track:2gNfxysfBRfl9Lvi9T3v6R"
        }
    },
    {
        "listening_date": 1481761844589,
        "track": {
            "artists": [{
                "external_urls": {
                    "spotify": "https://open.spotify.com/artist/5INjqkS1o8h1imAzPqGZBb"
                },
                "href": "https://api.spotify.com/v1/artists/5INjqkS1o8h1imAzPqGZBb",
                "id": "5INjqkS1o8h1imAzPqGZBb",
                "name": "Tame Impala",
                "type": "artist",
                "uri": "spotify:artist:5INjqkS1o8h1imAzPqGZBb"
            }],
            "available_markets": [
                "CA",
                "MX",
                "US"
            ],
            "disc_number": 1,
            "duration_ms": 108546,
            "explicit": false,
            "external_urls": {
                "spotify": "https://open.spotify.com/track/2gNfxysfBRfl9Lvi9T3v6R"
            },
            "href": "https://api.spotify.com/v1/tracks/2gNfxysfBRfl9Lvi9T3v6R",
            "id": "2gNfxysfBRfl9Lvi9T3v6R",
            "name": "Disciples",
            "preview_url": "https://p.scdn.co/mp3-preview/6023e5aac2123d098ce490488966b28838b14fa2",
            "track_number": 9,
            "type": "track",
            "uri": "spotify:track:2gNfxysfBRfl9Lvi9T3v6R"
        }
    }
];
        var data1 = [];
        for (i=0; i < spotifyPull.length; i++) {
            var exists = false;
            dateTime = spotifyPull[i].listening_date;
            date = Math.floor(dateTime / 1000000);
            for (j = 0; j < data1.length; j++) {
                if (Math.floor(data1[j][0] / 1000000) == date) {
                    data1[j][1] = data1[j][1] + 1;
                    exists = true;
                }
            }
            if (exists == false) {
                data1.push([dateTime, 1]);
            }

        }


        var dataTest = [
            [1, 350], [2, 330], [3, 400], [4, 370], [5, 350], [6, 330],  [7, 159], [8, 370],
            [9, 160], [10, 130], [11, 40], [12, 80]

        ];




        var dataset = [
          {
            data: data1
          }
        ];

        var options = {
            series: {
                lines: {
                    show: true,
                    fill: true
                },
                points: {
                    radius: 3,
                    show: true
                },
            },
            xaxis: {
                mode: "time",
                timeformat: "%Y/%m/%d"
            }
        };

        $(document).ready(function () {
            $.plot($("#flot-placeholder"), dataset, options);
        });
    </script>
</head>
<body>
    <header>

    </header>

    <h1>Number of Songs Played per Date</h1>

    <div id="flot-placeholder"></div>


</body>
</html>