
<!DOCTYPE html>
<html>
    <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    </head>
<body>

<h2>JavaScript in Body</h2>

<p id="demo">A Paragraph.</p>

<button type="button" onclick="test1()">POST</button>
<button type="button" onclick="test2()">GET</button>

<script>

const Url = 'https://buzzik-cooperpellaton.c9users.io:8080/api/';
const testUser = 'spotify:user:genaricname';


function getBackendData(endpoint, parms) {
    $.ajax({
        url:Url + endpoint,
        type:"GET",
        // async: true,
        crossDomain: true,
        data: parms,
        // dataType: "jsonp",
        // "Access-Control-Allow-Origin": "*",
        headers: {
            "Access-Control-Allow-Origin": Url
        },
        success: function(result) {
            console.log("Get request success: ", result);
            return result;
        },
        error:function(error){
            console.log('Error ', error);
            return error;
        }
    });
}

function postToBackend(endpoint, parms, body) {
    $.ajax({
        url: Url + endpoint + '?' + jQuery.param(parms),
        type: "POST",
        crossDomain: true,
        // dataType: "jsonp", // Only works with GET requests
        "headers": {
            'Access-Control-Allow-Origin': '*',
        },
        // data: jQuery.param(parms),
        success: function(result) {
            console.log("Post request success: ", result);
            return result;
        },
        error: function(error) {
            console.error('Post request error: ', error);
        }
    });
}

function getListeningHistorySingleUser(user_id) {
    return getBackendData('get_listening_history', {id: user_id});
}

function getUserInfo(user_id) {
    return getBackendData('get_user', {id: user_id});
}

function getUserFacultyStatus(user_id) {
    return getBackendData('get_faculty_status', {id: user_id});
}

function getNotificationPeriod(user_id) {
    return getBackendData('get_user_notification_frequency', {id: user_id});
}

function getUserRawData(user_id) {
    return getBackendData('get_raw_data', {id: user_id});
}

// Pass in one of "day", "month", "week", "never"
function updateUserNotificationPeriod(user_id, period) {
    return postToBackend('store_user_notification_frequency', {id: user_id, notification_frequency: period});
}

// function updateUserFacultyStatus(user_id, is_faculty) {
//     return postToBackend('store_faculty_status', {id: user_id, faculty_status: is_faculty});
// }

function deleteUser(user_id) {
    return postToBackend('delete_user', {id: user_id});
}


function test1() {
    // console.log(updateUserNotificationPeriod(testUser, "day"));
    // console.log(getNotificationPeriod(testUser));
    console.log(updateUserNotificationPeriod(testUser, "month"));
    // console.log(getNotificationPeriod(testUser));
}

function test2() {
    // console.log(updateUserNotificationPeriod(testUser, "day"));
    // console.log(getNotificationPeriod(testUser));
    // console.log(updateUserNotificationPeriod(testUser, "month"));
    console.log(getNotificationPeriod(testUser));
    // console.log(getListeningHistorySingleUser(testUser));
}

</script>

</body>
</html>


